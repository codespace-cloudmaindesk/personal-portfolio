name: Personal CI/CD – End-to-End Software Delivery Pipeline

on:
  push:
    branches:
      - main
      - develop
  pull_request:
    branches:
      - main
      - develop

jobs:
  run_frontend_quality_assurance:
    name: Frontend Stage – Code Quality & Automated Testing
    uses: ./.github/workflows/frontend-quality-assurance.yml

  run_frontend_production_build:
    name: Frontend Stage – Production Build Generation
    needs: run_frontend_quality_assurance
    uses: ./.github/workflows/frontend-production-build.yml

  run_backend_quality_assurance:
    name: Backend Stage – Code Quality & Automated Testing
    uses: ./.github/workflows/backend-quality-assurance.yml

  deploy_application_to_production:
    name: Deployment Stage – Release Application to Production Environment
    needs:
      - run_frontend_production_build
      - run_backend_quality_assurance
    if: github.ref == 'refs/heads/main'
    uses: ./.github/workflows/production-docker-deployment.yml
    secrets: inherit
